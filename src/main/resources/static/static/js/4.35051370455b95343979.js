webpackJsonp([4],{"72+b":function(e,t){},BpQt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("hcrA"),s=a.n(i),n=a("W7zn"),o=a("cosN"),l={name:"dataDic",components:{"nav-header":n.a,"container-top":o.a},data:function(){return{username:Cookies.get("fedname"),token:Cookies.get("fedtoken"),tableData:[],pagesize:10,currentPage:1,dialogVisibleAdd:!1,formAdd:{},fileList:[]}},mounted:function(){this.findDimensions(),this.attributeReq()},methods:{attributeReq:function(){var e=this;e.axios.post("/attributeReq",e.qs.stringify({specific:!0,operator:e.username,token:e.token}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{emulateJSON:!0}).then(function(t){t.data.message.state?e.tableData=t.data.attributes:e.$message.error(t.data.message)},function(t){e.$message.error(t.response.data.message),401==t.response.status&&(e.$router.push("/"),Cookies.set("fedname",1,{expires:-1}),Cookies.set("fedrole",1,{expires:-1}))})},handleAdd:function(){this.dialogVisibleAdd=!0},attributeUpdate:function(){var e=this;if(""==e.formAdd.file)e.$message.error("请上传CSV文件");else{var t=document.querySelector(".add-uploadimg input[type=file]").files[0];console.log(t);var a=new FormData;a.append("csv",t),a.append("operator",e.username),a.append("token",e.token),e.axios.post("/attributeUpdate",a,{headers:{"Content-Type":"multipart/form-data"}},{emulateJSON:!0}).then(function(t){e.dialogVisibleAdd=!1,t.data.message.state?(e.$message({message:"数据字典更新成功",type:"success"}),e.attributeReq()):e.$message.error(t.data.message)},function(t){e.$message.error(t.response.data.message),401==t.response.status&&(e.$router.push("/"),Cookies.set("v2tokens",1,{expires:-1}),Cookies.set("v2name",1,{expires:-1}),Cookies.set("v2role",1,{expires:-1}),Cookies.set("v2time",1,{expires:-1}))})}},findDimensions:function(){window.innerWidth?this.winWidth=window.innerWidth:document.body&&document.body.clientWidth&&(this.winWidth=document.body.clientWidth),window.innerHeight?this.winHeight=window.innerHeight:document.body&&document.body.clientHeight&&(this.winHeight=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(this.winHeight=document.documentElement.clientHeight,this.winWidth=document.documentElement.clientWidth),s()(".datadic-list").attr("style","min-height:"+(this.winHeight-360)+"px;")}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("container-top")],1),e._v(" "),a("el-container",[a("nav-header"),e._v(" "),a("el-main",[a("el-container",{staticClass:"container-main-div"},[a("div",{staticClass:"container-div"},[a("div",{staticClass:"container-main"},[a("div",{staticClass:"top-main"},[a("div",{staticClass:"page-top-line"},[a("div",{staticClass:"page-title"},[e._v("数据字典")])]),e._v(" "),a("div",{staticClass:"screen-block"},[a("el-button",{staticClass:"submit-btn-style",on:{click:e.handleAdd}},[e._v("更新数据字典")])],1)]),e._v(" "),a("div",{staticClass:"out-div"},[a("div",{staticClass:"datadic-list"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize)}},[a("el-table-column",{attrs:{prop:"attrName",label:"数据项名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"含义说明"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cnName",label:"中文名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dataType",label:"数据类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",label:"类别"}}),e._v(" "),a("el-table-column",{attrs:{prop:"area",label:"取值范围"}}),e._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供"}})],1)]],2)])])])]),e._v(" "),a("el-dialog",{attrs:{title:"更新数据字典",visible:e.dialogVisibleAdd,width:"500px","lock-scroll":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisibleAdd=t}}},[a("el-form",{ref:"formAdd",attrs:{model:e.formAdd,"label-width":"120px"}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"文件名"}},[a("el-input",{model:{value:e.formAdd.filename,callback:function(t){e.$set(e.formAdd,"filename",t)},expression:"formAdd.filename"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"400px"},attrs:{label:"上传CSV文件"}},[a("el-input",{staticClass:"add-uploadimg",attrs:{type:"file"},model:{value:e.formAdd.file,callback:function(t){e.$set(e.formAdd,"file",t)},expression:"formAdd.file"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"submit-btn-style",attrs:{type:"primary"},on:{click:e.attributeUpdate}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"cancle-btn-style",on:{click:function(t){e.dialogVisibleAdd=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(l,d,!1,function(e){a("72+b")},null,null);t.default=r.exports}});
//# sourceMappingURL=4.35051370455b95343979.js.map