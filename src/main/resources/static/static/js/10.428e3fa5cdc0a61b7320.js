webpackJsonp([10],{"6shi":function(e,t){},EepJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),n=a("hcrA"),o=a.n(n),l=a("W7zn"),r=a("cosN"),c={name:"datamanage",components:{"nav-header":l.a,"container-top":r.a},data:function(){return{username:Cookies.get("fedname"),token:Cookies.get("fedtoken"),tabList:[],activeClass:"",tableData:[],pagesize:10,currentPage:1,dialogVisibleDel:!1,formDel:{}}},mounted:function(){this.findDimensions(),this.getSceneList()},methods:{getDataList:function(){var e=this;e.axios.post("/datasetReq",e.qs.stringify({scene:e.activeClass,operator:e.username,token:e.token}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{emulateJSON:!0}).then(function(t){t.data.message.state?e.tableData=t.data.datasets:e.$message.error(t.data.message)},function(t){e.$message.error(t.response.data.message),401==t.response.status&&(e.$router.push("/"),Cookies.set("fedname",1,{expires:-1}),Cookies.set("fedrole",1,{expires:-1}))})},handleAdd:function(){this.$router.push("/dataWork?sceneName="+this.activeClass)},handleDelete:function(e,t){this.dialogVisibleDel=!0,this.formDel=i()({},t)},deleteThis:function(){var e=this;e.dialogVisibleDel=!1,e.axios.post("/datasetDelete",e.qs.stringify({scene:e.activeClass,datasetName:e.formDel.datasetName.datasetName,operator:e.username,token:e.token}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{emulateJSON:!0}).then(function(t){t.data.message.state?(e.$message({message:"删除数据集成功",type:"success"}),e.currentPage=1,e.getDataList()):e.$message.error(t.data.message)},function(t){e.$message.error(t.response.data.message),401==t.response.status&&(e.$router.push("/"),Cookies.set("fedname",1,{expires:-1}),Cookies.set("fedrole",1,{expires:-1}))})},getSceneList:function(){var e=this;e.axios.post("/sceneReq",e.qs.stringify({specific:!1,operator:e.username,token:e.token}),{headers:{"Content-Type":"application/x-www-form-urlencoded"}},{emulateJSON:!0}).then(function(t){t.data.message.state?t.data.scenes.length?(e.tabList=t.data.scenes,e.activeClass=t.data.scenes[0].sceneName,e.getDataList()):(e.tabList=[],e.activeClass=""):e.$message.error(t.data.message)},function(t){e.$message.error(t.response.data.message),401==t.response.status&&(e.$router.push("/"),Cookies.set("fedname",1,{expires:-1}),Cookies.set("fedrole",1,{expires:-1}))})},changeBtn:function(e){this.activeClass=e,this.getDataList()},handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},findDimensions:function(){window.innerWidth?this.winWidth=window.innerWidth:document.body&&document.body.clientWidth&&(this.winWidth=document.body.clientWidth),window.innerHeight?this.winHeight=window.innerHeight:document.body&&document.body.clientHeight&&(this.winHeight=document.body.clientHeight),document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth&&(this.winHeight=document.documentElement.clientHeight,this.winWidth=document.documentElement.clientWidth),o()(".account-list").attr("style","min-height:"+(this.winHeight-420)+"px;")}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("container-top")],1),e._v(" "),a("el-container",[a("nav-header"),e._v(" "),a("el-main",[a("el-container",{staticClass:"container-main-div"},[a("div",{staticClass:"container-div"},[a("div",{staticClass:"container-main"},[a("div",{staticClass:"top-main"},[a("div",{staticClass:"page-top-line"},[a("div",{staticClass:"page-title"},[e._v("数据管理")])]),e._v(" "),a("div",{staticClass:"subbtn"},e._l(e.tabList,function(t,s){return a("div",{class:e.activeClass==e.tabList[s].sceneName?"active":"",on:{click:function(t){return e.changeBtn(e.tabList[s].sceneName)}}},[a("el-badge",{staticClass:"item",attrs:{value:e.tabList[s].institution}},[a("p",[e._v(e._s(e.tabList[s].sceneName))])])],1)}),0),e._v(" "),a("div",{staticClass:"screen-block"},[e.tabList.length>0?a("el-button",{staticClass:"submit-btn-style",attrs:{icon:"el-icon-plus"},on:{click:e.handleAdd}},[e._v("新增数据集")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"out-div"},[a("div",{staticClass:"account-list"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize)}},[a("el-table-column",{attrs:{prop:"datasetName.datasetName",label:"数据集名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alignedNum.alignedNum",label:"对齐样本量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"providers",label:"数据提供方"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",e._l(t.row.providers,function(t,s){return a("p",[e._v(e._s(t.provider))])}),0)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"timestamp",label:"建立时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"240px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cell"},[a("div",{staticClass:"btns del-btn",on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[a("img",{attrs:{src:"static/images/del.png",alt:""}}),e._v(" "),a("p",[e._v("删除")])])])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,50],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]],2)])])])]),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogVisibleDel,width:"400px","lock-scroll":!1,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},on:{"update:visible":function(t){e.dialogVisibleDel=t}}},[a("img",{staticClass:"del-tip-style",attrs:{src:"static/images/del_tip.png",alt:""}}),e._v(" "),a("p",{staticClass:"del-tip-p"},[e._v("确定删除？")]),e._v(" "),a("el-form",{ref:"formDel",attrs:{model:e.formDel,"label-width":"80px"}},[a("el-form-item",{staticStyle:{display:"none"},attrs:{label:"ID"}},[a("el-input",{model:{value:e.formDel.datasetName,callback:function(t){e.$set(e.formDel,"datasetName",t)},expression:"formDel.datasetName"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"submit-btn-style",attrs:{type:"primary"},on:{click:e.deleteThis}},[e._v("确 定")]),e._v(" "),a("el-button",{staticClass:"cancle-btn-style",on:{click:function(t){e.dialogVisibleDel=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(c,d,!1,function(e){a("6shi")},null,null);t.default=u.exports}});
//# sourceMappingURL=10.428e3fa5cdc0a61b7320.js.map